model User {
  id String @id @default(cuid())

  email           String           @unique
  password        String
  role            Role             @default(USER)
  profile         Profile?
  bodyMeasurement BodyMeasurement?

  recipe      Recipe[]
  recipeLike  RecipeLike[]
  recipeView  RecipeView[]
  comment     Comment[]
  commentLike CommentLike[]
  order       Order[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Profile {
  id String @id @default(cuid())

  fullName String  @map("full_name")
  gender   Gender?
  age      Int?
  bio      String?
  photo    String?
  contact  String?

  bodyMeasurements BodyMeasurement[]

  user   User   @relation(fields: [userId], references: [id])
  userId String @unique @map("user_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("profiles")
}

model BodyMeasurement {
  id String @id @default(cuid())

  height     Int?
  weight     Int?
  chest      Int?
  waist      Int?
  thigh      Int?
  arm        Int?
  goalWeight Int? @map("goal_weight")

  activityLevel ActivityLevel? @map("activity_level")
  nutritionGoal NutritionGoal? @map("nutrition_goal")

  user      User     @relation(fields: [userId], references: [id])
  userId    String   @unique @map("user_id")
  profile   Profile? @relation(fields: [profileId], references: [id])
  profileId String?  @map("profile_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("body_measurements")
}

enum Role {
  USER
  ADMIN
}

enum Gender {
  MALE
  FEMALE
}

enum ActivityLevel {
  SEDENTARY
  LIGHT
  MODERATE
  ACTIVITY
  VERY_ACTIVITY
}

enum NutritionGoal {
  WEIGHT_LOSS
  MAINTENANCE
  MUSCLE_GAIN
}
